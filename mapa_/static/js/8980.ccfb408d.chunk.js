"use strict";(self.webpackChunk_genially_view_client=self.webpackChunk_genially_view_client||[]).push([[8980],{45577:(e,t,i)=>{i.d(t,{q:()=>a});var n=i(45992),o=i(17588),l=i(66264),r=i(60708),d=i(70698),s=i(5441);const a=e=>{let{getItems:t,item:i,menuType:a,theme:u,shouldCloseWhenClickOutside:c=!1,menuTheme:m,styles:g,slideSize:h,getItemLayout:v}=e;const[f,C]=(0,o.useState)(t()),[p,y]=(0,o.useState)(!1),T=(0,o.useCallback)((()=>{y((e=>!e))}),[]);(0,o.useEffect)((()=>{const e=null===i||void 0===i?void 0:i.on(l.q.Message,(e=>{e===r.m.Entering&&(C(t()),y(!1))}));return()=>{null===e||void 0===e||e()}}),[t,i]);const b=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=(0,o.useRef)(null);return(0,o.useEffect)((()=>{const n=t=>{i.current&&!i.current.contains(t.target)&&e(t)};return document.addEventListener("mouseup",n,t),document.addEventListener("touchend",n,t),()=>{document.removeEventListener("mouseup",n,t),document.removeEventListener("touchend",n,t)}}),[i,e,t]),i}((0,o.useCallback)((()=>{c&&p&&y(!1)}),[p,c]),!0);(0,o.useEffect)((()=>{C(t())}),[t]);const x=(0,d.CO)(a);return(0,s.T)({theme:u,children:(0,n.jsx)(x,{items:f,onToggleClick:T,opened:p,ref:b,theme:u,menuTheme:m,styles:g,slideSize:h,getItemLayout:v})})}},15690:(e,t,i)=>{i.d(t,{M:()=>C});var n=i(45992),o=i(17588),l=i(15536),r=i(89035),d=i(21646);const s=()=>{},a=(0,o.forwardRef)(((e,t)=>{let{styles:i}=e;const o=s;return(0,n.jsx)(d.W1,{ref:t,style:{margin:l.I,width:`calc(100% - ${2*l.I}px)`,height:`calc(100% - ${2*l.I}px)`},$backgroundColor:i.backgroundColor,$hamburgerIconColor:i.hamburgerIconColor,children:(0,n.jsxs)(d.YT,{"data-nav-element":"hamburger-menu-toggle",$width:r.sf,children:[(0,n.jsx)(d.e3,{}),(0,n.jsx)(d.cl,{onClick:o,role:"button",children:(0,n.jsx)(d.h_,{children:(0,n.jsx)(d.RG,{$color:i.hamburgerIconColor})})})]})})}));var u=i(58424),c=i(73242);const m=Math.random().toString(36).substring(7),g=()=>{},h=(0,o.forwardRef)(((e,t)=>{let{items:i,menuTheme:o,styles:r}=e;const d=`mainMenu-${m}`,s=g,{ref:a,hasScroll:h}=(0,u.x)();return(0,n.jsxs)(c.W1,{"aria-labelledby":d,role:"menu",ref:t,$menuTheme:o,style:{margin:l.I,width:`calc(100% - ${2*l.I}px)`,height:`calc(100% - ${2*l.I}px)`},$backgroundColor:r.backgroundColor,children:[h.horizontal&&(0,n.jsx)(c.hh,{onClick:s,$menuTheme:o,$disabled:!0,children:(0,n.jsx)(c.rZ,{})}),(0,n.jsx)(c.JU,{id:d,children:"Main menu"}),(0,n.jsx)(c.e3,{}),(0,n.jsx)(c.QS,{ref:a,children:i.map((e=>(0,n.jsx)(c.d,{$isLink:e.isLink,$isActive:e.isActive,$isAllowed:e.isAllowed,$backgroundColor:e.backgroundColor,$textColor:e.textColor,children:(0,n.jsx)(c.Dr,{tabIndex:-1,"aria-label":e.altText||void 0,"aria-disabled":!e.altText,children:(0,n.jsx)(c.gi,{children:e.text})})},e.text+e.key)))}),h.horizontal&&(0,n.jsx)(c.hh,{onClick:s,$menuTheme:o,children:(0,n.jsx)(c.wF,{})})]})}));var v=i(54769);var f=i(5441);const C=e=>{let{getItems:t,menuType:i,theme:o,styles:l,menuTheme:r}=e;const d=t(),s=(e=>{switch(e){case v.L.Horizontal:return h;case v.L.Hamburger:return a;default:return h}})(i);return(0,f.T)({theme:o,children:(0,n.jsx)(s,{items:d,menuTheme:r,styles:l})})}},76390:(e,t,i)=>{i.d(t,{F:()=>o,c:()=>l});var n=i(15938);const o=e=>e===n.N.Dark?{textColor:"rgb(255, 255, 255)",itemBackgroundColor:"rgb(208, 208, 208)"}:{textColor:"rgb(0, 0, 0)",itemBackgroundColor:"rgb(154, 154, 154)"},l=e=>e===n.N.Dark?{menuBackgroundColor:"rgb(0, 0, 0)",hamburgerIconColor:"rgb(255, 255, 255)"}:{menuBackgroundColor:"rgb(255, 255, 255)",hamburgerIconColor:"rgb(0, 0, 0)"}},68980:(e,t,i)=>{i.r(t),i.d(t,{geniallyMenuEditorScript:()=>f});var n=i(45992),o=i(57277),l=i(55399),r=i(45577),d=i(15690),s=i(76390);var a,u=i(89035),c=i(54769);!function(e){e[e.MD=380]="MD"}(a||(a={}));const m=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];var n;if(!e||!e.exists)return;const o=e,{menuType:l}=t;if(i){if(l===c.L.Horizontal){const e=(e=>{switch(e){case c.L.Horizontal:return{minWidth:a.MD,maxWidth:void 0};case c.L.Hamburger:return{minWidth:u.N_.width,maxWidth:a.MD};default:return{minWidth:void 0,maxWidth:void 0}}})(l),t=o.parentSlide.size.width-24,i=Math.max(null!==(n=e.minWidth)&&void 0!==n?n:0,t);o.setSize(i,u.cE.height),o.setPosition((o.parentSlide.size.width-i)/2,o.y)}l===c.L.Hamburger&&o.setSize(u.N_.width,u.N_.height)}};var g=i(38352),h=i(46822);const v=(0,l.V)((e=>{let{editor:t,script:i,getItemLayout:o}=e;var l;const{theme:d,t:s}=t,{item:a}=i,{menuItems:u,menuTheme:c,menuType:m,backgroundColor:h,hamburgerIconColor:v}=i.getConfig(),f=null!==(l=null===a||void 0===a?void 0:a.parentSlide.size)&&void 0!==l?l:{width:0,height:0};return(0,n.jsx)(r.q,{getItems:()=>(0,g.N)(u,t,s,!0),menuType:m,theme:d,menuTheme:c,styles:{backgroundColor:h,hamburgerIconColor:v},slideSize:f,getItemLayout:o})})),f=e=>{let{script:t,editor:i}=e;i.justCreatedFromSidebar&&(e=>{let{editor:t,script:i}=e;0===i.getConfig().slidesToDisplay.selectedSlides.length&&i.mutateConfig((e=>{e.slidesToDisplay.selectedSlides=t.getSlides().map((e=>e.id))}))})({editor:i,script:t}),i.on("slideCreated",(e=>{let{slide:i}=e;((e,t)=>{if(!1===e.getConfig().slidesToDisplay.allSlidesSelected){const i=e.item;i.excludedSlidesIds=[...i.excludedSlidesIds,t.id]}})(t,i)})),i.on("slideDeleted",(e=>{let{slide:n}=e;((e,t)=>{1===e.getSlides().length&&t.mutateConfig((e=>{e.slidesToDisplay.allSlidesSelected=!0,e.slidesToDisplay.selectedSlides=[]}))})(i,t),((e,t)=>{const{allSlidesSelected:i,selectedSlides:n}=e.getConfig().slidesToDisplay;if(!i)if(null===n||void 0===n?void 0:n.includes(t.id))e.mutateConfig((e=>{e.slidesToDisplay.selectedSlides=e.slidesToDisplay.selectedSlides.filter((e=>e!==t.id))}));else{const i=e.item;i.excludedSlidesIds=i.excludedSlidesIds.filter((e=>e!==t.id))}})(t,n)})),t.on("configChange",(e=>{let{config:n,prevConfig:o}=e;const l=t.item;l&&((e=>{let{item:t}=e;if(!t||!t.exists)return;const i=t;t.thumbnail&&(i.thumbnail=void 0)})({item:l}),o&&n.menuType!==o.menuType&&m(l,n,!0),o&&((e,t)=>{return e.slidesToDisplay.allSlidesSelected!==(null===t||void 0===t?void 0:t.slidesToDisplay.allSlidesSelected)||(i=e.slidesToDisplay.selectedSlides,n=null===t||void 0===t?void 0:t.slidesToDisplay.selectedSlides,i.length!==n.length||!i.every(((e,t)=>e===n[t])));var i,n})(n,o)&&((e,t,i,n)=>{e.item&&e.item.exists&&(function(e,t,i){const n=i.slidesToDisplay.selectedSlides.filter((e=>t.getSlides().find((t=>t.id===e))));n.length!==i.slidesToDisplay.selectedSlides.length&&e.mutateConfig((e=>{e.slidesToDisplay.selectedSlides=n}))}(e,t,i),function(e,t,i,n){const{item:o}=e,l=o;(i.slidesToDisplay.allSlidesSelected!==(null===n||void 0===n?void 0:n.slidesToDisplay.allSlidesSelected)||i.slidesToDisplay.selectedSlides!==(null===n||void 0===n?void 0:n.slidesToDisplay.selectedSlides))&&(l.excludedSlidesIds=function(e,t){if(e.slidesToDisplay.allSlidesSelected)return[];const i=t.getSlides(),n=e.slidesToDisplay.selectedSlides||[];return i.filter((e=>!n.includes(e.id))).map((e=>e.id))}(i,t),e.mutateConfig((e=>{e.slidesToDisplay.allSlidesSelected&&(e.slidesToDisplay.selectedSlides=[])})))}(e,t,i,n))})(t,i,n,o),o&&n.menuTheme!==o.menuTheme&&((e,t,i)=>{const n=(0,s.c)(e.menuTheme),o=(0,s.F)(e.menuTheme);i.mutateConfig((e=>{e.backgroundColor===t.backgroundColor&&(e.backgroundColor=n.menuBackgroundColor),e.hamburgerIconColor===t.hamburgerIconColor&&(e.hamburgerIconColor=n.hamburgerIconColor),e.menuItems=e.menuItems.map(((e,i)=>{var n,l,r,d;return e.backgroundColor===(null===(l=null===(n=t.menuItems)||void 0===n?void 0:n[i])||void 0===l?void 0:l.backgroundColor)&&(e.backgroundColor=o.itemBackgroundColor),e.textColor===(null===(d=null===(r=t.menuItems)||void 0===r?void 0:r[i])||void 0===d?void 0:d.textColor)&&(e.textColor=o.textColor),e}))}))})(n,o,t),l.showOverflow||(l.showOverflow=!0),l.isTransversal||(l.isTransversal=!0))}));const l=()=>{var e,i,n,o,l,r,d,s;return{width:null!==(i=null===(e=t.item)||void 0===e?void 0:e.width)&&void 0!==i?i:0,height:null!==(o=null===(n=t.item)||void 0===n?void 0:n.height)&&void 0!==o?o:0,left:null!==(r=null===(l=t.item)||void 0===l?void 0:l.x)&&void 0!==r?r:0,top:null!==(s=null===(d=t.item)||void 0===d?void 0:d.y)&&void 0!==s?s:0}};(0,o.x)({getTargetNodeItem:()=>t.item,renderApp:()=>(0,n.jsx)(v,{editor:i,script:t,isSelectableItem:h.M2,selectableItems:h.Xg,getItemLayout:l}),renderThumbnailApp:()=>{const{theme:e,t:o}=i,{menuItems:l,menuTheme:r,menuType:s,backgroundColor:a,hamburgerIconColor:u}=t.getConfig();return(0,n.jsx)(d.M,{getItems:()=>(0,g.N)(l,i,o,!0),menuType:s,theme:e,menuTheme:r,styles:{backgroundColor:a,hamburgerIconColor:u}})},nodePrefix:"menu"})({script:t,editor:i})}},38352:(e,t,i)=>{var n;i.d(t,{N:()=>u,e:()=>m}),function(e){e.None="none",e.Unique="unique"}(n||(n={}));const o=new Map,l=new Map;function r(e){const t=function(e){return"string"===typeof e?l.get(e):o.get(e)}(e);if(!t)throw new Error(`error getting metadata for unknown interactivity action type - ${e}`);return t}var d=i(48237);const s=(e,t,i)=>""===e?t(i?"__new.editor.widget.menu.sidebar.emptyTitlePlaceholder":"__new.view.widget.menu.sidebar.emptyTitlePlaceholder"):e,a=(e,t)=>{var i,n,o,l;const d=e.menuItemAction.action;if(!d)return!1;const s=r(d.type),a=null===(i=s.getSlideIdsFromSnapshot)||void 0===i?void 0:i.call(s,d),u=null===(n=t.getCurrentSlide())||void 0===n?void 0:n.id;if(a&&a.length>0)return u===a[0];const c=t.getSlides(),m=c.findIndex((e=>e.id===u));return"smartLink"in d.target&&"firstPage"===(null===(o=d.target)||void 0===o?void 0:o.smartLink)?0===m:"smartLink"in d.target&&"lastPage"===(null===(l=d.target)||void 0===l?void 0:l.smartLink)&&m===c.length-1},u=(e,t,i,n)=>e.map(((e,o)=>{var l;const r=(null===(l=e.menuItemAction.action)||void 0===l?void 0:l.type)===d.L.GoToSlide;return{text:s(e.menuItemName,i,n),key:o,onClick:()=>{},isLink:r,isActive:a(e,t),isAllowed:r,altText:e.altText,backgroundColor:e.backgroundColor,textColor:e.textColor}})),c={active:!1,allowed:!1},m=(e,t,i)=>e.map(((e,n)=>{var o,l;const r=!!(null===(o=e.menuItemAction)||void 0===o?void 0:o.data)&&(null===(a=e.menuItemAction.data)||void 0===a?void 0:a.type)===d.L.GoToSlide;var a;const{active:u,allowed:m}=r&&(null===(l=e.menuItemAction)||void 0===l?void 0:l.data)?t.getGoToSlideState(e.menuItemAction.data):c;return{text:s(e.menuItemName,t.t,i),key:n,onClick:()=>{var t;return null===(t=e.menuItemAction)||void 0===t?void 0:t.run()},isLink:r,isActive:u,isAllowed:m,altText:e.altText,backgroundColor:e.backgroundColor,textColor:e.textColor}}))},57277:(e,t,i)=>{i.d(t,{x:()=>o});var n=i(70377);function o(e){let{getTargetNodeItem:t,renderApp:i,renderThumbnailApp:o,nodePrefix:l}=e;return e=>{let{script:r,editor:d}=e,s=null,a=[];function u(e){s&&(n.unmountComponentAtNode(s),s=null),e&&"innerHtml"in e&&(e.innerHtml='<div class="card-iframe"><div style="width: 100%; height: 100%; background: #FF0000; color: #FFFFFF;">Deleted</div><script><\/script></div>')}function c(){s&&n.render(i(),s)}function m(){const e=t(r.getConfig());if(!e)return;const i=`${l}-${e.id}`;"innerHtml"in e&&(e.innerHtml=`<div class="card-iframe"><div id="${i}" class="genially-widget-app" style="width: 100%; height: 100%;"></div></div>`),requestAnimationFrame((()=>{s="idOfFreeNode"in e?document.getElementById(e.idOfFreeNode)||null:document.getElementById(i)||null,c()}))}function g(){o&&a.length&&a.forEach((e=>{n.render(o(),e)}))}function h(){const e=t(r.getConfig());e&&"idOfThumbnailFreeNode"in e&&requestAnimationFrame((()=>{const t=document.getElementsByClassName(e.idOfThumbnailFreeNode);a=Array.from(t),g()}))}r.on("configChange",(e=>{let{config:i,prevConfig:n}=e;const o=t(i),l=n?t(n):void 0;l&&l!==o&&u(l),o&&(o!==l?(m(),h()):(c(),g()))})),r.on("dispose",(()=>{u(t(r.getConfig()))})),d.on("itemMount",(e=>{let{item:t}=e;t===r.item&&m()})),d.on("slideChange",(()=>{c()})),d.on("itemUnmount",(e=>{let{item:t}=e;t===r.item&&u()})),d.on("itemThumbnailMount",(e=>{let{item:t}=e;t===r.item&&h()}))}}}}]);
//# sourceMappingURL=https://s3-static-genially.genially.com/view/static/js/8980.ccfb408d.chunk.js.map